"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{8005:function(e,t,s){s.d(t,{Z:function(){return d}});var a=s(5893),i=s(4955),n=s(1163),l=s(1664),c=s.n(l),r=s(2443),o=s(8417);let p=(0,o.Z)({key:"ccss",prepend:!0});function d(){let e=(0,n.useRouter)();return(0,a.jsx)(r.C,{value:p,children:(0,a.jsxs)("div",{className:"App-navigation",children:[(0,a.jsx)("div",{className:"ui-section-header__layout ui-layout-flex",children:(0,a.jsx)(c(),{href:"/",children:(0,a.jsx)("img",{src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673004204/letter-l_pcq0m6.png",height:"80px",width:"80px",loading:"lazy"})})}),(0,a.jsx)(i.Z,{sx:{height:"30vh",flexDirection:"column",justifyContent:"space-Between"},children:(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{onClick:()=>e.push("/top-tracks"),className:"/top-tracks"==e.pathname?"App-navigation__link active":"App-navigation__link",children:[(0,a.jsx)("img",{className:"icon",src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673254845/microphone_kobhxr.png"}),(0,a.jsx)("span",{className:"sideText",children:"Top Tracks"})]}),(0,a.jsxs)("li",{onClick:()=>e.push("/top-artists"),className:"/top-artists"==e.pathname?"App-navigation__link active":"App-navigation__link",children:[(0,a.jsx)("img",{className:"icon",src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673254845/clock_dlnmhg.png"}),(0,a.jsx)("span",{className:"sideText",children:"Top Artists"})]}),(0,a.jsxs)("li",{onClick:()=>e.push("/recently_played"),className:"/recently_played"==e.pathname?"App-navigation__link active":"App-navigation__link",children:[(0,a.jsx)("img",{className:"icon",src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673254845/music_bgxg2f.png"}),(0,a.jsx)("span",{className:"sideText",children:"Recent"})]})]})})]})})}},6195:function(e,t,s){s.d(t,{Z:function(){return B}});var a=s(5893),i=s(7294),n=s(7357),l=s(3264);let c=(0,l.Z)(n.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center"});var r=s(1163);function o(e){let t;let{number:s,image:i,genres:l,link:o,name:p,type:d,artists:m}=e,h=(0,r.useRouter)();var u,y,x,j=("0"===(y=(u=new Date(e.timeStamp)).toLocaleString([],{hour:"2-digit",minute:"2-digit"}))[0]&&(y=y.slice(1)),u.toDateString()!==new Date().toDateString()&&(y=u.toLocaleString([],{weekday:"short"})+" "+y),y);return(0,a.jsxs)(c,{onClick:()=>{h.push(o)},sx:{padding:"10px 20px",borderRadius:"1%",mb:"10px","&:hover":{cursor:"pointer",filter:"brightness(110%)"}},className:"individualBlock".concat(e.type),children:[(0,a.jsxs)(c,{sx:{ml:"30px"},children:[(0,a.jsx)(n.Z,{sx:{fontSize:"18px",fontWeight:"bold",mr:"10px",color:"#50496d"},children:s}),(0,a.jsx)("div",{className:"crop",children:(0,a.jsx)("img",{className:"listImage",src:i})})]}),"artists"===d&&(0,a.jsx)(c,{className:"tracksBlock",children:(0,a.jsxs)(n.Z,{className:"tracksNameArtists",sx:{ml:"15px"},children:[(0,a.jsx)(n.Z,{sx:{width:"100%",fontSize:"18px"},children:p}),(0,a.jsx)(n.Z,{children:(x=[l.slice(0,3)],t=[],x.map(e=>{e.map(e=>{t.push(function(e){let t=e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return t}(e))})}),t.join(" , "))})]})}),"tracks"===d&&(0,a.jsx)(c,{className:"tracksBlock",children:(0,a.jsxs)(n.Z,{className:"tracksNameArtists",sx:{ml:"15px"},children:[(0,a.jsx)(n.Z,{sx:{width:"100%",fontSize:"18px"},children:p}),(0,a.jsx)(n.Z,{children:m})]})}),"recentlyPlayed"===d&&(0,a.jsxs)(c,{className:"recentlyPlayedBlock",children:[(0,a.jsxs)(n.Z,{className:"RPNameArtists",sx:{ml:"20px"},children:[(0,a.jsx)(n.Z,{sx:{width:"100%",fontSize:"18px"},children:p}),(0,a.jsx)(n.Z,{sx:{fontWeight:"0"},children:m})]}),(0,a.jsx)(n.Z,{className:"RPTime",children:j})]})]})}var p=s(4955),d=s(3321),m=s(9957),h=s(657),u=s(1425),y=s(6514),x=s(8951),j=s(7645),g=s(2443),f=s(8417);let v=(0,f.Z)({key:"css",prepend:!0});function k(e){let[t,s]=i.useState(!1),[n,l]=i.useState(""),c=async()=>{o(),e.setPlaylistTitle(n),l("")},r=()=>{s(!0)},o=()=>{s(!1)},p=e=>{l(e.target.value)};return(0,a.jsx)(g.C,{value:v,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:"scrollButton",onClick:r,children:"Create Playlist"}),(0,a.jsxs)(h.Z,{open:t,onClose:o,children:[(0,a.jsx)(j.Z,{className:"dialogTitle",children:"One More Thing!"}),(0,a.jsxs)(y.Z,{children:[(0,a.jsx)(x.Z,{className:"dialogContent",children:"What would you like to name your new playlist?"}),(0,a.jsx)(m.Z,{onChange:p,autoFocus:!0,margin:"dense",name:"name",fullWidth:!0,variant:"standard",value:n})]}),(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(d.Z,{className:"dialogButton",onClick:o,children:"Cancel"}),(0,a.jsx)(d.Z,{className:"dialogButton",onClick:c,children:"Submit"})]})]})]})})}let _=(0,f.Z)({key:"ccss",prepend:!0});function N(e){(0,i.useEffect)(()=>{s(!0)},[e.url]);let[t,s]=i.useState(!1);(0,r.useRouter)();let n=()=>{s(!1)};function l(e){let t=window.open(e,"_blank");null!=t&&t.focus()}return(0,a.jsx)(g.C,{value:_,children:(0,a.jsx)("div",{children:(0,a.jsx)(h.Z,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,a.jsxs)("div",{className:"popUp",children:[(0,a.jsx)(j.Z,{id:"alert-dialog-title",children:"Success!"}),(0,a.jsxs)(y.Z,{children:[(0,a.jsx)("img",{className:"popUpImg",src:e.img,alt:"playlist",onClick:()=>l(e.url)}),(0,a.jsx)(x.Z,{id:"alert-dialog-description",children:"Your playlist has been created."}),(0,a.jsxs)("div",{className:"popUpButtonBox",children:[(0,a.jsx)(d.Z,{className:"popUpButtons",onClick:n,children:"Close"}),(0,a.jsx)(d.Z,{className:"popUpButtons",onClick:()=>l(e.url),children:"Let Me See!"})]})]})]})})})})}var S=s(4184),Z=s.n(S);let w=(0,f.Z)({key:"ccss",prepend:!0});function T(e){let[t,s]=(0,i.useState)(null),[n,l]=(0,i.useState)(!1),[c,r]=(0,i.useState)(""),[o,d]=(0,i.useState)(""),[m,h]=(0,i.useState)(!0),u=e.data.map(e=>e[1].uri);async function y(){let t=function(){let t=e.data.map(e=>e[1].uri),s=t.slice(0,20),a=s.map(e=>e.slice(15));return a}(),s=await Promise.all(t.map(e=>{let t=fetch("https://api.spotify.com/v1/artists/".concat(e,"/top-tracks?market=US"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});return t})),a=await Promise.all(s.map(e=>e.json())),i=a.map(e=>e.tracks),n=i.map(e=>e.slice(0,5)),l=n.map(e=>e.map(e=>e.uri)),c=l.flat();return c}async function x(){let s=localStorage.getItem("id");async function a(t){if("tracks"===e.type)await fetch("https://api.spotify.com/v1/playlists/".concat(t,"/tracks"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({uris:u})});else if("artists"===e.type)await y().then(e=>{fetch("https://api.spotify.com/v1/playlists/".concat(t,"/tracks"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({uris:e})})});else if("recentlyPlayed"===e.type){let s=e.data.map(e=>e[1].track.uri);await fetch("https://api.spotify.com/v1/playlists/".concat(t,"/tracks"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({uris:s})})}setTimeout(()=>{j(t)},1e3)}await fetch("https://api.spotify.com/v1/users/".concat(s,"/playlists"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},body:JSON.stringify({name:"".concat(t),description:"Your top ".concat("recentlyPlayed"!==e.type?e.type:"recent plays"," on Spotify!")})}).then(e=>e.json()).then(t=>{"tracks"===e.type?a(t.id):"artists"===e.type?a(t.id):"recentlyPlayed"===e.type&&a(t.id)})}async function j(e){await fetch("https://api.spotify.com/v1/playlists/".concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then(e=>e.json()).then(e=>{d(e.images[1].url),r(e.external_urls.spotify)})}function f(){window.pageYOffset>0?h(!1):0===window.pageYOffset&&h(!0)}return(0,i.useEffect)(()=>{null!=t&&(x(),s(null))}),(0,i.useEffect)(()=>(window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}),[]),(0,i.useEffect)(()=>{""!=c&&""!=o&&l(!0)},[c]),(0,a.jsx)(g.C,{value:w,children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(p.Z,{className:Z()("action-buttons",{"action-buttons--scrolled":!m}),sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",...e.sx},children:[(0,a.jsxs)(p.Z,{width:"100%",sx:{justifyContent:"center"},className:"action-buttons__info",children:[(0,a.jsxs)(p.Z,{className:"scrollTitle",children:["Create Your Top"," ","tracks"===e.type&&"Tracks"||"artists"===e.type&&"Artists"||"recentlyPlayed"===e.type&&"Recent Hits"," ","Playlist!"]}),"recentlyPlayed"!==e.type?(0,a.jsxs)(p.Z,{children:["This creates a playlist from your Top-50 ",e.type," ","artists"==e.type&&"with a\n          track from each artist."]}):(0,a.jsx)(p.Z,{children:"This creates a playlist from your 50 most recently played tracks!"})]}),(0,a.jsx)(k,{type:e.type,data:e.data,setPlaylistTitle:s}),n&&(0,a.jsx)(N,{url:c,img:o})]}),(0,a.jsx)("div",{className:"extra_box"})]})})}function C(e){let t=Object.entries(e.data);return"artists"===e.type?(0,a.jsxs)(a.Fragment,{children:[t.map(t=>(0,a.jsx)(o,{number:parseInt(t[0])+1,image:t[1].images[0].url,name:t[1].name,link:t[1].external_urls.spotify,genres:t[1].genres,type:e.type,artists:void 0})),(0,a.jsx)(T,{type:e.type,data:t})]}):"tracks"===e.type?(0,a.jsxs)(a.Fragment,{children:[t.map(t=>(0,a.jsx)(o,{number:parseInt(t[0])+1,image:t[1].album.images[0].url,name:t[1].name,link:t[1].external_urls.spotify,artists:t[1].artists[0].name,type:e.type,genres:void 0})),(0,a.jsx)(T,{type:e.type,data:t})]}):"recentlyPlayed"===e.type?(0,a.jsxs)(a.Fragment,{children:[t.map(t=>(0,a.jsx)(o,{image:t[1].track.album.images[0].url,name:t[1].track.name,link:t[1].track.external_urls.spotify,artists:t[1].track.artists[0].name,type:e.type,timeStamp:t[1].played_at})),(0,a.jsx)(T,{type:e.type,data:t})]}):(0,a.jsx)(a.Fragment,{})}function b(e){return(0,a.jsx)("header",{role:"banner",className:"ui-section-header-main",children:(0,a.jsxs)("div",{className:"ui-layout-container",children:[(0,a.jsxs)("div",{className:"mainHeaderTopLine",children:[(0,a.jsx)("p",{className:"arrowBox",children:(0,a.jsx)("i",{className:"arrow down"})}),(0,a.jsx)("div",{className:"ui-section-header__layout ui-layout-flex",children:"PLAYING FROM YOUR LIBRARY"}),(0,a.jsx)("p",{className:"dotBox",children:(0,a.jsx)("div",{className:"dots",children:"︙"})})]}),(0,a.jsx)("div",{className:"threeLines",children:(0,a.jsx)("img",{src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673171846/output-onlinepngtools_vqtnph.png"})}),(0,a.jsxs)("div",{className:"pictureAndDoodles",children:[(0,a.jsx)("div",{className:"clouds",children:(0,a.jsx)("img",{src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673171605/pngwing.com_makokv.png"})}),(0,a.jsx)("div",{className:"mainHeaderPictureTopTracks",children:"artists"===e.type?(0,a.jsx)("img",{src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673093181/Your_Top_Song_1_xmam4z.png",width:"400px",height:"400px"}):"tracks"===e.type?(0,a.jsx)("img",{src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673093181/Your_Top_Genre_okndsi.png",width:"400px",height:"400px"}):"recentlyPlayed"===e.type?(0,a.jsx)("img",{src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673093181/Your_Top_Artist_3_s0139u.png",width:"400px",height:"400px"}):void 0}),(0,a.jsx)("div",{className:"scribbleLine",children:(0,a.jsx)("img",{src:"https://res.cloudinary.com/dd97ovnmi/image/upload/v1673171604/PngItem_642765_vxjz01.png"})})]})]})})}function A(e){let t={long_term:"All time",medium_term:"Last 6 months",short_term:"Last month"};return(0,a.jsx)("div",{className:"timeButtonSelector",children:["long_term","medium_term","short_term"].map(s=>(0,a.jsx)("button",{onClick:()=>e.onSelect(s),className:Z()("time-option",{"time--active":s===e.select}),children:t[s]}))})}function B(e){let[t,s]=(0,i.useState)("long_term"),[n,l]=(0,i.useState)({});async function c(){"recentlyPlayed"!=e.type?await fetch("https://api.spotify.com/v1/me/top/".concat(e.type,"?limit=50&time_range=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then(e=>e.json()).then(e=>l(e.items)):"recentlyPlayed"===e.type&&await fetch("https://us-central1-listi-f7e6a.cloudfunctions.net/app/recently_played/?access_token=".concat(localStorage.getItem("access_token")),{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>l(e.items))}return(0,i.useEffect)(()=>{c()},[t]),(0,a.jsx)(a.Fragment,{children:"recentlyPlayed"===e.type?(0,a.jsxs)("div",{className:"topBlocksRecentlyPlayed",children:[(0,a.jsx)(b,{type:e.type}),(0,a.jsx)("div",{className:"songListAndButtons",children:(0,a.jsx)(C,{data:n,type:e.type})})]}):"artists"===e.type?(0,a.jsxs)("div",{className:"topBlocksArtists",children:[(0,a.jsx)(b,{type:e.type}),(0,a.jsxs)("div",{className:"songListAndButtons",children:[(0,a.jsx)(A,{select:t,onSelect:s}),(0,a.jsx)(C,{data:n,type:e.type})]})]}):"tracks"===e.type?(0,a.jsxs)("div",{className:"topBlocksTracks",children:[(0,a.jsx)(b,{type:e.type}),(0,a.jsxs)("div",{className:"songListAndButtons",children:[(0,a.jsx)(A,{select:t,onSelect:s}),(0,a.jsx)(C,{data:n,type:e.type})]})]}):void 0})}},4955:function(e,t,s){var a=s(7357),i=s(3264);let n=(0,i.Z)(a.Z)({display:"flex",alignItems:"center"});t.Z=n}}]);